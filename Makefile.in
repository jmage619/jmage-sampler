CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@

#CXXFLAGS := -Wall -O3
CXXFLAGS := @CXXFLAGS@
#LIB = -ljack -framework CoreAudio
LIB = -lm -ljack -lsndfile
CXX = g++

all : jmage-sampler

jmage-sampler : components.o jmage-sampler.o
	$(CXX) $(LIB) $(LDFLAGS) -o $@ $^

components.o : src/jmage/components.cxx src/jmage/components.h src/jmage/collections.h
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -Isrc -c -o $@ $<

jmage-sampler.o : src/jmage-sampler.c src/jmage/components.h
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -Isrc -c -o $@ $<

clean:
	rm -f jmage-sampler jmage-sampler.o components.o
