CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@

#CXXFLAGS := -Wall -O3
CXXFLAGS := @CXXFLAGS@
#LIB = -ljack -framework CoreAudio
LIB = -lm -ljack -lsndfile
CXX = g++

all : jmage-sampler

jmage-sampler : structures.o jmage-sampler.o
	$(CXX) $(LIB) $(LDFLAGS) -o $@ $^

structures.o : src/jmage/structures.c src/jmage/structures.h
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -Isrc -c -o $@ $<

jmage-sampler.o : src/jmage-sampler.c src/jmage/structures.h
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -Isrc -c -o $@ $<

clean:
	rm -f jmage-sampler jmage-sampler.o structures.o
